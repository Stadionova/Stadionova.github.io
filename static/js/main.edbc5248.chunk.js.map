{"version":3,"sources":["Components/Snippets/Snippets.module.scss","Components/Search/Search.module.scss","Components/DetailedSnippet/DetailedSnippet.module.scss","store.js","Components/Snippets/Snippets.jsx","Components/Snippets/SnippetsContainer.jsx","Components/Search/Search.jsx","makeApiRequest.jsx","Components/Search/SearchContainer.jsx","Components/DetailedSnippet/DetailedSnippet.jsx","App.js","reportWebVitals.js","index.js"],"names":["module","exports","API_REQUEST_IN_PROCESS","initialState","isResponseGot","store","createStore","state","action","type","catchApiRequest","Snippets","flag","snippetsData","data","buttonRef","value","addDefaultSrc","event","target","src","localStorage","setItem","JSON","stringify","undefined","parse","getItem","className","classes","snippetsWrapper","snippetsWrapperShow","ref","map","book","dataKey","key","split","id","length","isbn","to","pathname","title","author","publishDate","publisher","cover","eachSnippet","onError","alt","SnippetsContainer","props","this","setUrlPrefixDispacth","React","Component","Search","currentInputValue","timerId","showLoadingAnimation","stopLoadingAnimation","isTimerStarted","useState","serverData","setServerData","inputValue","createRef","allSnipets","setTimerId","setTimeout","axios","get","then","response","status","docs","makeApiRequest","searchInput","searchBlock","onChange","current","replace","toLowerCase","clearTimeout","placeholder","onClick","style","display","SearchContainer","subscribe","setState","getState","connect","dispatch","DetailedSnippet","bookDetailedData","location","modalWindow","detailedSnippetWrapper","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.edbc5248.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"snippetsWrapper\":\"Snippets_snippetsWrapper__FbN_J\",\"eachSnippet\":\"Snippets_eachSnippet__1P51Q\",\"snippetsWrapperShow\":\"Snippets_snippetsWrapperShow___6b0B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchInput\":\"Search_searchInput__2_5_m\",\"searchBlock\":\"Search_searchBlock__hMTBZ\",\"show\":\"Search_show__2ocjZ\",\"hide\":\"Search_hide__dScOd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modalWindow\":\"DetailedSnippet_modalWindow__3yCEN\",\"detailedSnippetWrapper\":\"DetailedSnippet_detailedSnippetWrapper__n0VY7\"};","import { createStore } from 'redux';\r\n\r\nconst API_REQUEST_IN_PROCESS = 'API_REQUEST_IN_PROCESS';\r\n\r\nconst initialState = {\r\n    isResponseGot: false\r\n};\r\n\r\nfunction catchApiResponse(state = initialState, action) {\r\n    switch (action.type) {\r\n        case API_REQUEST_IN_PROCESS:\r\n            return {\r\n                ...state,\r\n                isResponseGot: action.isResponseGot\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst store = createStore(catchApiResponse, initialState);\r\n\r\nexport const catchApiRequest = (isResponseGot) => {\r\n    return {\r\n        type: API_REQUEST_IN_PROCESS,\r\n        isResponseGot: isResponseGot\r\n    }\r\n};\r\n\r\nexport default store;\r\n\r\n","import classes from \"./Snippets.module.scss\";\r\nimport React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst Snippets = ({ data, buttonRef, value }) => {\r\n    let flag;\r\n    let snippetsData;\r\n\r\n    function addDefaultSrc(event) {\r\n        event.target.src = 'https://klike.net/uploads/posts/2020-04/1587719791_1.jpg';\r\n    }\r\n\r\n    data && localStorage.setItem('data', JSON.stringify(data));\r\n\r\n    (value && value.isResponseGot && data === undefined)\r\n        ? flag = 'show'\r\n        : flag = 'hide';\r\n\r\n    data\r\n        ? snippetsData = data\r\n        : snippetsData = JSON.parse(localStorage.getItem('data'));\r\n\r\n    return (\r\n        <div className={data ? classes.snippetsWrapper : classes.snippetsWrapperShow} ref={buttonRef}>\r\n            <div data={flag}></div>\r\n            {snippetsData.map(book => {\r\n                const dataKey = book.key.split('/');\r\n                const id = dataKey[dataKey.length - 1];\r\n                const isbn = book.isbn ? book.isbn[0] : '';\r\n                return (\r\n                    <NavLink\r\n                        to={{\r\n                            pathname: book.key,\r\n                            title: book.title,\r\n                            author: book['author_name'] ? book['author_name'][0] : '',\r\n                            publishDate: book['publish_date'] ? book['publish_date'][0] : '',\r\n                            publisher: book.publisher ? book.publisher[0] : '',\r\n                            isbn: book.isbn ? book.isbn[0] : '',\r\n                            cover: `http://covers.openlibrary.org/b/isbn/${isbn}-M.jpg?default=false`\r\n                        }}>\r\n                        <div className={classes.eachSnippet} key={id}>\r\n                            <img\r\n                                onError={addDefaultSrc}\r\n                                src={`http://covers.openlibrary.org/b/isbn/${isbn}-M.jpg?default=false`}\r\n                                alt=\"обложка\" />\r\n                            <h1>{book.title}</h1>\r\n                            <p>{book['author_name'] ? book['author_name'][0] : ''}</p>\r\n                        </div>\r\n                    </NavLink>\r\n                )\r\n            })}\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Snippets;\r\n","import React from \"react\";\r\nimport Snippets from \"../Snippets/Snippets\";\r\n\r\nclass SnippetsContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {}\r\n    }\r\n    addDefaultSrc(event) {\r\n        event.target.src = 'https://klike.net/uploads/posts/2020-04/1587719791_1.jpg';\r\n    }\r\n    render() {\r\n        let flag;\r\n        if (this.props.value && this.props.value.isResponseGot && this.props.data === undefined) {\r\n            flag = 'show';\r\n        } else {\r\n            flag = 'hide';\r\n        }\r\n        return (\r\n            <Snippets\r\n                flag={flag}\r\n                addDefaultSrc={this.addDefaultSrc}\r\n                setUrlPrefixDispacth={this.props.setUrlPrefixDispacth}\r\n                data={this.props.data}\r\n                buttonRef={this.props.buttonRef}\r\n                value={this.props.value}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nexport default SnippetsContainer;\r\n","import classes from \"./Search.module.scss\";\r\nimport makeApiRequest from \"../../makeApiRequest\";\r\nimport SnippetsContainer from \"../Snippets/SnippetsContainer\";\r\nimport React, { useState } from 'react';\r\n\r\nconst Search = ({ showLoadingAnimation, stopLoadingAnimation, value }) => {\r\n    let currentInputValue;\r\n    let isTimerStarted = false;\r\n    let timerId;\r\n\r\n    const [serverData, setServerData] = useState(currentInputValue);\r\n    const inputValue = React.createRef();\r\n    const allSnipets = React.createRef();\r\n\r\n    function showAllBooks() {\r\n        allSnipets.current.style.display = 'block';\r\n        if (currentInputValue !== undefined) {\r\n            showLoadingAnimation();\r\n        }\r\n    }\r\n\r\n    function setTimerId() {\r\n        isTimerStarted = true;\r\n        timerId = setTimeout(() => {\r\n            makeApiRequest(currentInputValue, setServerData, stopLoadingAnimation);\r\n            isTimerStarted = false;\r\n        }, 1000);\r\n    }\r\n\r\n    function catchInputChanges() {\r\n        currentInputValue = inputValue.current.value.replace(/ /g, \"+\").toLowerCase();\r\n        if (!isTimerStarted) {\r\n            setTimerId();\r\n        } else {\r\n            clearTimeout(timerId);\r\n            setTimerId();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.searchInput}>\r\n            <div className={classes.searchBlock}>\r\n                <input\r\n                    type=\"text\"\r\n                    onChange={catchInputChanges}\r\n                    ref={inputValue}\r\n                    placeholder='type title of the book here'\r\n                />\r\n                <button onClick={showAllBooks}>SEARCH</button>\r\n            </div>\r\n            <SnippetsContainer buttonRef={allSnipets} data={serverData} value={value} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Search;\r\n","import axios from \"axios\";\r\n\r\nexport default function getServerData(currentInputValue, setServerData, stopLoadingAnimation) {\r\n    axios.get(`https://openlibrary.org/search.json?q=${currentInputValue}`).then(response => {\r\n        if (response.status === 200) {\r\n            setServerData(response.data.docs);\r\n            stopLoadingAnimation();\r\n        }\r\n    });\r\n}\r\n","import React from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { catchApiRequest } from \"../../store\";\r\nimport Search from \"./Search\";\r\nimport store from '../../store';\r\n\r\nconst mapStateToProps = function () {\r\n    return {};\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        showLoadingAnimation: () => {\r\n            dispatch(catchApiRequest(true));\r\n        },\r\n        stopLoadingAnimation: () => {\r\n            dispatch(catchApiRequest(false));\r\n        }\r\n    }\r\n}\r\n\r\nclass SearchContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {}\r\n    }\r\n    componentDidMount() {\r\n        store.subscribe(() => {\r\n            this.setState({ isResponseGot: store.getState() });\r\n        });\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Search\r\n                    showLoadingAnimation={this.props.showLoadingAnimation}\r\n                    stopLoadingAnimation={this.props.stopLoadingAnimation}\r\n                    value={this.state.isResponseGot}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchContainer);\r\n","import classes from \"./DetailedSnippet.module.scss\";\r\nimport React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst DetailedSnippet = (props) => {\r\n    let bookDetailedData;\r\n\r\n    function addDefaultSrc(event) {\r\n        event.target.src = 'https://klike.net/uploads/posts/2020-04/1587719791_1.jpg';\r\n    }\r\n\r\n    if (props.location.isbn) {\r\n        bookDetailedData = props.location;\r\n        localStorage.setItem('bookDetailedData', JSON.stringify(bookDetailedData));\r\n    } else {\r\n        if (!JSON.parse(localStorage.getItem('bookDetailedData')).isbn) {\r\n            localStorage.setItem('bookDetailedData', JSON.stringify(bookDetailedData));\r\n            bookDetailedData = JSON.parse(localStorage.getItem('bookDetailedData'));\r\n        } else {\r\n            bookDetailedData = JSON.parse(localStorage.getItem('bookDetailedData'));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className={classes.modalWindow}>\r\n            <div className={classes.detailedSnippetWrapper}>\r\n                <img onError={addDefaultSrc} src={bookDetailedData.cover} alt=\"\" />\r\n                <h1>НАЗВАНИЕ {bookDetailedData.title}</h1>\r\n                <p>АВТОР {bookDetailedData.author}</p>\r\n                <p>ДАТА ПУБЛИКАЦИИ {bookDetailedData.publishDate}</p>\r\n                <p>ИЗДАТЕЛЬ {bookDetailedData.publisher}</p>\r\n                <p>ISBN {bookDetailedData.isbn}</p>\r\n            </div>\r\n            <NavLink\r\n                to={{\r\n                    pathname: '/'\r\n                }}>\r\n                <button>✖</button>\r\n            </NavLink>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DetailedSnippet;\r\n","import './App.scss';\nimport SearchContainer from './Components/Search/SearchContainer';\nimport DetailedSnippet from './Components/DetailedSnippet/DetailedSnippet';\nimport { Route } from \"react-router-dom\";\nimport React from \"react\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Route path='/works/' component={DetailedSnippet} />\n      <Route path='/' component={SearchContainer} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n  <BrowserRouter>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}